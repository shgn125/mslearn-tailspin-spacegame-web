# ASP.NET
# Build and test ASP.NET projects.
# Add steps that publish symbols, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/apps/aspnet/build-aspnet-4

trigger:
- main

pool:
  vmImage: 'windows-latest'

variables:
- name: one
  value: initialValue 
- name: isMain
  value: $[eq(variables['Build.SourceBranch'], 'refs/heads/main')]

steps:
  - script: |
      echo ${{ variables.one }} # outputs initialValue
      echo $(one)
    displayName: First variable pass
  - bash: echo '##vso[task.setvariable variable=one]secondValue'
    displayName: Set new variable value
  - script: |
      echo ${{ variables.one }} # outputs initialValue
      echo $(one) # outputs secondValue
      echo ${{ variables.isMain}}
      echo $[eq(variables['Build.SourceBranch'], 'refs/heads/main')]
    displayName: Second variable pass
